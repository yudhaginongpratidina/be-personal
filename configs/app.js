// ===============================================================================
// DEPENDENCIES
// ===============================================================================
import cookieParser from "cookie-parser";
import express from "express";
import cors from "cors";


// ===============================================================================
// CUSTOM MIDDLEWARE
// ===============================================================================
import ErrorMiddleware from "../middlewares/error.middleware.js";


// ===============================================================================
// ROUTES
// ===============================================================================
import API from "../routes/api.js";


// ===============================================================================
// INITIALIZATION
// ===============================================================================
const APP = express();


// ===============================================================================
// MIDDLEWARE
// ===============================================================================
APP.use(cors({
    origin: process.env.CORS_ORIGIN,
    credentials: true,
    methods: ['GET', 'POST', 'DELETE', 'PATCH', 'OPTIONS']
}));
APP.use(express.json());
APP.use(cookieParser());
APP.use(express.urlencoded({ extended: true }));


// ===============================================================================
// ROUTE DECLARATIONS
// ===============================================================================
APP.use(API);


// ===============================================================================
// MIDDLEWARE
// ===============================================================================
APP.use(ErrorMiddleware);


// ===============================================================================
// EXPORT
// ===============================================================================
export default APP;